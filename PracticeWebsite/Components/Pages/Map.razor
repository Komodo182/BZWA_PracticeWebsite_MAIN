@page "/map"
﻿@using PracticeWebsite.Services
@using PracticeWebsite.Models
@using PracticeWebsite.Utilities    
@inject CustomerServices CustomerService

<PageTitle>Gamified Learning</PageTitle>

<MudCard>
    <MudCarousel Class="mud-width-full" Style="height:600px;" ShowArrows="false" ShowBullets="false" EnableSwipeGesture="false" AutoCycle="true" TData="object">
        <MudCarouselItem Transition="@Transition.Slide" Color="@Color.Primary">
            <div class="d-flex" style="height:100%">
                <MudImage Fluid="true" ObjectFit="ObjectFit.Cover" ObjectPosition="@ObjectPosition.Center"
                Height="1280" Width="1920" Src="images/BrownBear(1).jpg" Alt="Image Error! We sincerly apologise for this issue." Elevation="25" />
            </div>
        </MudCarouselItem>
        <MudCarouselItem Transition="@Transition.Slide" Color="@Color.Secondary">
            <div class="d-flex" style="height:100%">
                <MudImage Fluid="true" ObjectFit="ObjectFit.Cover" ObjectPosition="@ObjectPosition.Center"
                Height="1280" Width="1920" Src="images/Meerkats(1).jpg" Alt="Image Error! We sincerly apologise for this issue." Elevation="25" />
            </div>
        </MudCarouselItem>
        <MudCarouselItem Transition="@Transition.Slide">
            <div class="d-flex" style="height:100%">
                <MudImage Fluid="true" ObjectFit="ObjectFit.Cover" ObjectPosition="@ObjectPosition.Center"
                Height="1280" Width="1920" Src="images/Wolf(1).jpg" Alt="Image Error! We sincerly apologise for this issue." Elevation="25" />
            </div>
        </MudCarouselItem>
    </MudCarousel>
</MudCard>

<MudContainer Fixed="true" MaxWidth="MaxWidth.ExtraExtraLarge">
    <MudGrid Class="my-4" Justify="Justify.Center">
        <!-- Intro Section -->
        <MudItem xs="12">
            <MudCard Style="@($"Background:{Colors.Brown.Lighten1};")" Class="d-flex justify-center align-center">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Align="Align.Center" Typo="Typo.h2">Memberships</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudDivider />
                <MudCardContent>
                    <MudBreadcrumbs Items="_quizitems"></MudBreadcrumbs>
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="12" sm="12" md="12">
            <MudText Typo="Typo.h4" Align="Align.Center">Search for an excercise!</MudText>
        </MudItem>
        <MudItem xs="12" sm="10" md="6">
            <MudCard Elevation="3" Class="rounded-lg pb-4">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h5" Align="Align.Center">Key Stages:</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <div class="d-flex justify-center">
                        <MudText Typo="Typo.h6" Class="ml-1 mt-5">Search for what level you need!</MudText>
                    </div>
                    <MudList T="string" Class="mx-auto mt-4" Style="width:300px;">
                        <MudListItem Icon="@Icons.Material.Filled.Check">
                            <MudButton OnClick="@(() => chooseKs(0))" Variant="Variant.Filled" Color="Color.Primary">KS1</MudButton>
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.Check">
                            <MudButton OnClick="@(() => chooseKs(1))" Variant="Variant.Filled" Color="Color.Primary">KS2</MudButton>
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.Check">
                            <MudButton OnClick="@(() => chooseKs(2))" Variant="Variant.Filled" Color="Color.Primary">KS3</MudButton>
                        </MudListItem>
                    </MudList>
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="12" sm="10" md="6">
            <MudCard Elevation="3" Class="rounded-lg pb-4">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h5" Align="Align.Center">Subjects:</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <div class="d-flex justify-center">
                        <MudText Typo="Typo.h6" Class="ml-1 mt-5">Search for what subject you need!</MudText>
                    </div>
                    <MudList T="string" Class="mx-auto mt-4" Style="width:300px;">
                        <MudListItem Icon="@Icons.Material.Filled.Check">
                            <MudButton OnClick="@(() => chooseSub(0))" Variant="Variant.Filled" Color="Color.Primary">Mathematics</MudButton>
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.Check">
                            <MudButton OnClick="@(() => chooseSub(1))" Variant="Variant.Filled" Color="Color.Primary">Science</MudButton>
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.Check">
                            <MudButton OnClick="@(() => chooseSub(2))" Variant="Variant.Filled" Color="Color.Primary">English</MudButton>
                        </MudListItem>
                    </MudList>
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="12" sm="12" md="12">
            <MudCard Elevation="3" Class="rounded-lg pb-4">
                <MudCardContent>
                    <MudText Typo="Typo.h3" Align="Align.Center">Submit Selection</MudText>
                    <MudText Typo="Typo.h6" Align="Align.Center"> Please press the button below to submit your selected options and search for corresponding quizes.</MudText>
                </MudCardContent>
                <MudCardContent Class="d-flex justify-center align-center">
                    <MudStack>
                        <MudButton Disabled="@_processingSubmit" OnClick="ProcessSubmit" @bind-Completed="_searchComplete" Variant="Variant.Filled" Color="Color.Primary">
                            @if (_processingSubmit == true)
                            {
                                <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                <MudText Class="ms-2">Processing</MudText>
                            }
                            else
                            {
                                <MudText>Submit Search!</MudText>
                            }
                        </MudButton>
                        @if (mainSearchError == true)
                        {
                            <MudAlert Severity="Severity.Error" ContentAlignment="HorizontalAlignment.Center">Error! Ensure you have selected both a keystage & Subject.</MudAlert>
                        }
                        else
                        {
                            <MudAlert Severity="Severity.Info" ContentAlignment="HorizontalAlignment.Center">Please first select a keystage and a subject before you submit to not encounter an error!</MudAlert>
                        }

                        @if (validSearch == true)
                        {
                            <MudCard>
                                <MudCardContent>
                                    <MudText Typo="Typo.body2" Align="Align.Center">Please select which quiz you would like to load in.</MudText>
                                    <MudSelect Label="Select Level" @bind-Value="SelectedQuizLevel">
                                        @for (int i = 1; i <= 3; i++)
                                        {
                                            int num = i;
                                            <MudSelectItem Value="@num">@num</MudSelectItem>
                                        }
                                    </MudSelect>
                                    <MudButton Disabled="@_processingFullSubmit" OnClick="ProcessFullSubmit" @bind-Completed="_searchFullComplete" Variant="Variant.Filled" Color="Color.Primary">
                                        @if (_processingFullSubmit == true && validFullSearch == true)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Load Question!</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>

                        }
                    </MudStack>
                </MudCardContent>
            </MudCard>
        </MudItem>
        @if (validFullSearch == true && validSearch == true)
        {
            <MudItem xs="12" sm="12" md="12">
                <MudCard Class="flex-auto d-flex py-8 mud-theme-white" Elevation="6">
                    <MudStepper ShowResetButton CenterLabels="true" OnPreviewInteraction="OnPreviewInteractionQuestionair">
                        <MudStep Title="Question 1" HasError="@(_step1Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.1</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudText Typo="Typo.body1" Align="Align.Center">@SQLquizdata.Quiz1Question</MudText>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _1ButtonQuiz(0))"> @SQLquizdata.Quiz1Ans1 </MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _1ButtonQuiz(1))"> @SQLquizdata.Quiz1Ans2 </MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _1ButtonQuiz(2))"> @SQLquizdata.Quiz1Ans3 </MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _1ButtonQuiz(3))"> @SQLquizdata.Quiz1Ans4 </MudButton>
                                    </MudGrid>
                                    @* <MudHidden Breakpoint="@Breakpoint.Xs">
                                </MudHidden>*@
                                    <MudButton Disabled="@_processing1" OnClick="ProcessSomething1" @bind-Completed="_step1Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing1)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 2" HasError="@(_step2Complete==false)">
                            <MudCard>

                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.2</MudText>
                                    <MudText>@SQLquizdata.Quiz2Question</MudText>
                                </MudCardHeader>

                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _2ButtonQuiz(0))"> @SQLquizdata.Quiz2Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _2ButtonQuiz(1))"> @SQLquizdata.Quiz2Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _2ButtonQuiz(2))"> @SQLquizdata.Quiz2Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _2ButtonQuiz(3))"> @SQLquizdata.Quiz2Ans4</MudButton>
                                    </MudGrid>

                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>

                                    <MudButton Disabled="@_processing2" OnClick="ProcessSomething2" Variant="Variant.Outlined" Color="Color.Primary" Class="mt-4">
                                        @if (_processing2)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Confirm Selection</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 3" HasError="@(_step3Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.3</MudText>
                                    <MudText>@SQLquizdata.Quiz3Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _3ButtonQuiz(0))"> @SQLquizdata.Quiz3Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _3ButtonQuiz(1))"> @SQLquizdata.Quiz3Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _3ButtonQuiz(2))"> @SQLquizdata.Quiz3Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _3ButtonQuiz(3))"> @SQLquizdata.Quiz3Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing3" OnClick="ProcessSomething3" @bind-Completed="_step3Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing3)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 4" HasError="@(_step4Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.4</MudText>
                                    <MudText>@SQLquizdata.Quiz4Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _4ButtonQuiz(0))"> @SQLquizdata.Quiz4Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _4ButtonQuiz(1))"> @SQLquizdata.Quiz4Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _4ButtonQuiz(2))"> @SQLquizdata.Quiz4Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _4ButtonQuiz(3))"> @SQLquizdata.Quiz4Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing4" OnClick="ProcessSomething4" @bind-Completed="_step4Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing4)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 5" HasError="@(_step5Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.5</MudText>
                                    <MudText>@SQLquizdata.Quiz5Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _5ButtonQuiz(0))"> @SQLquizdata.Quiz5Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _5ButtonQuiz(1))"> @SQLquizdata.Quiz5Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _5ButtonQuiz(2))"> @SQLquizdata.Quiz5Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _5ButtonQuiz(3))"> @SQLquizdata.Quiz5Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing5" OnClick="ProcessSomething5" @bind-Completed="_step5Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing5)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 6" HasError="@(_step6Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.6</MudText>
                                    <MudText>@SQLquizdata.Quiz6Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _6ButtonQuiz(0))"> @SQLquizdata.Quiz6Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _6ButtonQuiz(1))"> @SQLquizdata.Quiz6Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _6ButtonQuiz(2))"> @SQLquizdata.Quiz6Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _6ButtonQuiz(3))"> @SQLquizdata.Quiz6Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing6" OnClick="ProcessSomething6" @bind-Completed="_step6Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing6)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 7" HasError="@(_step7Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.7</MudText>
                                    <MudText>@SQLquizdata.Quiz7Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _7ButtonQuiz(0))"> @SQLquizdata.Quiz7Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _7ButtonQuiz(1))"> @SQLquizdata.Quiz7Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _7ButtonQuiz(2))"> @SQLquizdata.Quiz7Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _7ButtonQuiz(3))"> @SQLquizdata.Quiz7Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing7" OnClick="ProcessSomething7" @bind-Completed="_step7Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing7)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 8" HasError="@(_step8Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.8</MudText>
                                    <MudText>@SQLquizdata.Quiz8Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _8ButtonQuiz(0))"> @SQLquizdata.Quiz8Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _8ButtonQuiz(1))"> @SQLquizdata.Quiz8Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _8ButtonQuiz(2))"> @SQLquizdata.Quiz8Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _8ButtonQuiz(3))"> @SQLquizdata.Quiz8Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing8" OnClick="ProcessSomething8" @bind-Completed="_step8Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing8)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 9" HasError="@(_step9Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.9</MudText>
                                    <MudText>@SQLquizdata.Quiz9Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _9ButtonQuiz(0))"> @SQLquizdata.Quiz9Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _9ButtonQuiz(1))"> @SQLquizdata.Quiz9Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _9ButtonQuiz(2))"> @SQLquizdata.Quiz9Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _9ButtonQuiz(3))"> @SQLquizdata.Quiz9Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing9" OnClick="ProcessSomething9" @bind-Completed="_step9Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing9)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                        <MudStep Title="Question 10" HasError="@(_step10Complete==false)">
                            <MudCard>
                                <MudCardHeader>
                                    <MudText Typo="Typo.h4">Question No.10</MudText>
                                    <MudText>@SQLquizdata.Quiz10Question</MudText>
                                </MudCardHeader>
                                <MudCardContent>
                                    <MudGrid Justify="Justify.SpaceEvenly">
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _10ButtonQuiz(0))"> @SQLquizdata.Quiz10Ans1</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _10ButtonQuiz(1))"> @SQLquizdata.Quiz10Ans2</MudButton>
                                        <MudFlexBreak />
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _10ButtonQuiz(2))"> @SQLquizdata.Quiz10Ans3</MudButton>
                                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => _10ButtonQuiz(3))"> @SQLquizdata.Quiz10Ans4</MudButton>
                                    </MudGrid>
                                    <MudHidden Breakpoint="@Breakpoint.Xs">
                                    </MudHidden>
                                    <MudButton Disabled="@_processing10" OnClick="ProcessSomething10" @bind-Completed="_step10Complete" Variant="Variant.Outlined" Color="Color.Primary">
                                        @if (_processing10)
                                        {
                                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                                            <MudText Class="ms-2">Processing</MudText>
                                        }
                                        else
                                        {
                                            <MudText>Submit Answer</MudText>
                                        }
                                    </MudButton>
                                </MudCardContent>
                            </MudCard>
                        </MudStep>
                    </MudStepper>
                    <MudAlert Severity="Severity.Info"> At times the questions may not load in please press one of the coloured buttons in the center and it should load in. We are very sorry for the inconvenience however we are working on it to fix this issue, Thank you for undertsanding and enjoy!</MudAlert>
                </MudCard>
            </MudItem>
        }
        else if (validSearch == true && (validFullSearch == false || validFullSearch == null))
        {
            <MudItem xs="12" sm="12" md="12">
                <MudAlert Severity="Severity.Info">To start a quiz select a quiz level and submit the search!</MudAlert>
            </MudItem>
        }
        else if (ShowUserAnswers == true)
        {
            <MudItem xs="12" sm="12" md="12">
                <MudCard Class="flex-auto d-flex py-8 mud-theme-white" Elevation="6">
                    <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
                        <MudTabPanel Text="Chart">
                            <MudGrid>
                                <MudItem xs="6">
                                    <MudChart ChartType="ChartType.Donut" Width="300px" Height="300px" InputData="@result" InputLabels="@labels">
                                        <CustomGraphics>
                                            <text class="donut-inner-text" x="47%" y="35%" dominant-baseline="middle" text-anchor="middle" fill="black" font-family="Helvetica" font-size="2">Total</text>
                                            <text class="donut-inner-text" x="47%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="black" font-family="Helvetica" font-size="5">@result.Sum().ToString()/10</text>
                                        </CustomGraphics>
                                    </MudChart>
                                </MudItem>
                                <MudItem xs="6">
                                    @*Add a support text like oh well done or others depending on how many the user got correct*@
                                </MudItem>
                            </MudGrid>
                        </MudTabPanel>
                        <MudTabPanel Text="Summary">
                            @* <MudDataGrid Items="@_quizResultsTable" Dense="true" Hover="true" Bordered="true" Breakpoint="Breakpoint.Sm">
                        <Columns>
                        <!-- Manually define which values show in each column -->
                        <Column Field="QuestionNr" Title="Participant" />
                        <Column Field="QuestionText" Title="Correct" />
                        <Column Field="QuestionIfCorrect" Title="Incorrect" />
                        </Columns>
                        </MudDataGrid> *@




                        </MudTabPanel>
                    </MudTabs>
                </MudCard>
            </MudItem>
        }
    </MudGrid>
</MudContainer>

<MudCard Class="footer-background" Elevation="1">
    <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" Class="py-6">
        <MudGrid Spacing="3">
            <!-- Column 1: Social Media Links -->
            <MudItem xs="12" sm="3">
                <MudText Typo="Typo.h6" Class="mb-2">Follow Us</MudText>
                <MudGrid Class="d-flex">
                    <MudItem xs="2">
                        <MudIconButton Disabled="true" Icon="@Icons.Custom.Brands.Facebook" Href="https://www.facebook.com" Target="_blank" Color="Color.Primary" />
                    </MudItem>
                    <MudItem xs="2">
                        <MudIconButton Disabled="true" Icon="@Icons.Custom.Brands.Twitter" Href="https://www.twitter.com" Target="_blank" Color="Color.Primary" />
                    </MudItem>
                    <MudItem xs="2">
                        <MudIconButton Disabled="true" Icon="@Icons.Custom.Brands.Instagram" Href="https://www.instagram.com" Target="_blank" Color="Color.Primary" />
                    </MudItem>
                    <MudItem xs="2">
                        <MudIconButton Disabled="true" Icon="@Icons.Custom.Brands.YouTube" Href="https://www.youtube.com" Target="_blank" Color="Color.Primary" />
                    </MudItem>
                    <MudItem xs="2">
                        <MudIconButton Disabled="true" Icon="@Icons.Custom.Brands.TikTok" Href="https://www.tiktok.com" Target="_blank" Color="Color.Primary" />
                    </MudItem>
                </MudGrid>
            </MudItem>

            <!-- Column 2: Contact Us -->
            <MudItem xs="12" sm="3">
                <MudText Typo="Typo.h6" Class="mb-2">Contact Us</MudText>
                <MudList Dense="true" T="string">
                    <MudListItem>
                        <MudIcon Icon="@Icons.Material.Filled.Phone" Class="me-2" />
                        <span>+44 1234 567890</span>
                    </MudListItem>
                    <MudListItem>
                        <MudIcon Icon="@Icons.Material.Filled.Email" Class="me-2" />
                        <span>info@zooexample.com</span>
                    </MudListItem>
                    <MudListItem>
                        <MudIcon Icon="@Icons.Material.Filled.LocationOn" Class="me-2" />
                        <span>123 Zoo Street, City, UK</span>
                    </MudListItem>
                </MudList>
            </MudItem>

            <!-- Column 3: Opening Hours -->
            <MudItem xs="12" sm="3">
                <MudText Typo="Typo.h6" Class="mb-2">Opening Hours</MudText>
                <MudList Dense="true" T="string">
                    <MudListItem>Monday - Friday: 9:00 AM - 5:00 PM</MudListItem>
                    <MudListItem>Saturday - Sunday: 10:00 AM - 6:00 PM</MudListItem>
                    <MudListItem>Bank Holidays: 10:00 AM - 4:00 PM</MudListItem>
                </MudList>
            </MudItem>

            <!-- Column 4: Policies and Links -->
            <MudItem xs="12" sm="3">
                <MudText Typo="Typo.h6" Class="mb-2">Links</MudText>
                <MudList Dense="true" T="string">
                    <MudListItem>
                        <MudLink Disabled="true" Href="/privacy-policy" Color="Color.Primary">Privacy Policy</MudLink>
                    </MudListItem>
                    <MudListItem>
                        <MudLink Disabled="true" Href="/terms-of-service" Color="Color.Primary">Terms of Service</MudLink>
                    </MudListItem>
                    <MudListItem>
                        <MudLink Disabled="true" Href="/cookies-policy" Color="Color.Primary">Cookies Policy</MudLink>
                    </MudListItem>
                    <MudListItem>
                        <MudLink Disabled="true" Href="/careers" Color="Color.Primary">Careers</MudLink>
                    </MudListItem>
                </MudList>
            </MudItem>
        </MudGrid>

        <MudDivider Class="my-4" />

        <!-- Copyright Section -->
        <MudText Typo="Typo.caption" Align="Align.Center">
            &copy; 2024 Zoo Example. All rights reserved. |
            <MudLink Disabled="true" Href="/privacy-policy" Color="Color.Primary">Privacy Policy</MudLink> |
            <MudLink Disabled="true" Href="/terms-of-service" Color="Color.Primary">Terms of Service</MudLink>
        </MudText>
    </MudContainer>
</MudCard>


@code {
    [Inject]
    IDialogService DialogService { get; set; }
    private ISnackbar Snackbar { get; set; }

    private int SelectedQuizLevel;
    private List<Question> Questions = new();
    private Dictionary<int, string> UserAnswers = new();
    private int SelectedQuestionIndex = -1;
    private string AnswerResponse = "";
    private int CorrectAnswers = 0;
    private bool? validSearch;
    private bool? validFullSearch;


    private bool? _searchComplete;
    public int submitKS;
    public int submitSUB;
    private int? chosenKs;
    private int? chosenSub;
    private bool _processingSubmit = false;
    private bool mainSearchError = false;
    private List<BreadcrumbItem> _quizitems = new List<BreadcrumbItem>
    {
        new BreadcrumbItem("Home", href: "/"),
        new BreadcrumbItem("Memberships", href: "/membership"),
    };
    private void FirstSearchError()
    {
        mainSearchError = true;
    }
    private async Task ProcessSubmit()
    {
        _searchComplete = false;
        _processingSubmit = true;
        validFullSearch = null;
        validSearch = false;
        ShowUserAnswers = false;
        await Task.Delay(3000);
        //(submitKS != null && Questions.Count > 0 && SelectedQuestionIndex >=0 && submitSUB != null && Questions.Count > 0 && SelectedQuestionIndex >=0)
        if (chosenSub != null || chosenSub !=0 && chosenKs != null || chosenKs !=0)
        {
            validSearch = true;
            submitKS = chosenKs ?? 0;
            submitSUB = chosenSub ?? 0;
        }
        else
        {
            FirstSearchError();
            validSearch = false;
        }
        //LoadQuestions();
        _processingSubmit = false;
        _searchComplete = true;
    }

    private quiz SQLquizdata = new quiz();
    private async Task LoadQuestions()
    {
        List<Quiz> Quizzes = await CustomerService.GetQuizzes(submitKS, submitSUB);
        if (Quizzes.Count != 0)
        {
            SQLquizdata = await CustomerService.GetQuizData(SelectedQuizLevel);
            UserAnswers.Clear();
            foreach (var question in Questions)
            {
                UserAnswers[question.QuizId] = "";
            }
            if (SQLquizdata == null) SQLquizdata = new quiz();
        }
    }


    private bool? _searchFullComplete;
    private bool _processingFullSubmit = false;
    private async Task ProcessFullSubmit()
    {
        _searchFullComplete = false;
        _processingFullSubmit = true;
        validFullSearch = false;
        await Task.Delay(3000);
        if (submitKS != null && submitSUB != null && (SelectedQuizLevel > 0 && SelectedQuizLevel < 3))
        {
            validFullSearch = true;
            LoadQuestions();
        }
        else
        {
            validFullSearch = false;
        }
        _processingFullSubmit = false;
        _searchFullComplete = true;

    }
    private void chooseSub(int id)
    {
        switch (id)
        {
            case 0:
                chosenSub = 1;
                break;
            case 1:
                chosenSub = 2;
                break;
            case 2:
                chosenSub = 3;
                break;
        }
    }
    private void chooseKs(int id)
    {
        switch (id)
        {
            case 0:
                chosenKs = 1;
                break;
            case 1:
                chosenKs = 2;
                break;
            case 2:
                chosenKs = 3;
                break;
        }
    }

    // private void _1ButtonText(int id)
    // {
    //     switch (id)
    //     {
    //         case 0:
    //             _1ButtonText = "Reply";
    //             break;
    //         case 1:
    //             _buttonText = "Reply All";
    //             break;
    //         case 2:
    //             _buttonText = "Forward";
    //             break;
    //         case 3:
    //             _buttonText = "Reply & Delete";
    //             break;
    //     }
    // }























    // private async Task LoadQuestions()
    // {
    //     List<Quiz> Quizzes = await CustomerService.GetQuizzes(submitSUB);
    //     if (Quizzes.Count != 0)
    //     {
    //         Questions = await CustomerService.GetQuestions(Quizzes[0].QuizId);
    //         UserAnswers.Clear();
    //         foreach (var question in Questions)
    //         {
    //             UserAnswers[question.QuizId] = "";
    //         }
    //         SelectedQuestionIndex = 0; // Start with the first question
    //     }
    // }
    // private void NextQuestion()
    // {
    //     if (SelectedQuestionIndex < Questions.Count - 1)
    //     {
    //         SelectedQuestionIndex++;
    //     }
    // }
    // private void PreviousQuestion()
    // {
    //     if (SelectedQuestionIndex > 0)
    //     {
    //         SelectedQuestionIndex--;
    //     }
    // }
    // private async Task CheckAnswer()
    // {
    //     try
    //     {
    //         string userAnswer = UserAnswers[Questions[SelectedQuestionIndex].QuizId];
    //         AnswerResponse = "Thinking...";

    //         // Generate response from Chatbot
    //         AnswerResponse = await OpenAiService.GetOpenAIResponseAsync($"You are being used in a educational quiz about {TopicService.SelectedTopic}. The question is: {Questions[SelectedQuestionIndex].Question1} Users answer is: {userAnswer}. Judge harshly whether the userAnswer is 'Correct' or 'Incorrect'? If no userAnswer or any fault, say 'Please Answer Again'");

    //         // Check if the response contains "Correct" (case-insensitive)
    //         if (AnswerResponse.Contains("Correct", StringComparison.OrdinalIgnoreCase))
    //         {
    //             CorrectAnswers++;
    //             AnswerResponse = "Correct!";
    //         }
    //         else
    //         {
    //             AnswerResponse = "Incorrect!";
    //         }

    //         // Update pie chart data
    //         data[0] = CorrectAnswers;
    //         data[1] = (Questions.Count - CorrectAnswers);

    //         StateHasChanged(); // Re-render the page to update UI
    //     }
    //     catch (Exception ex)
    //     {
    //         AnswerResponse = ex.Message;
    //     }
    // }
    // protected override void OnInitialized()
    // {
    //     TopicService.OnTopicChanged += StateHasChanged;
    // }

    // public void Dispose()
    // {
    //     TopicService.OnTopicChanged -= StateHasChanged;
    // }



    private bool? _step1Complete;
    private bool? _step2Complete;
    private bool? _step3Complete;
    private bool? _step4Complete;
    private bool? _step5Complete;
    private bool? _step6Complete;
    private bool? _step7Complete;
    private bool? _step8Complete;
    private bool? _step9Complete;
    private bool? _step10Complete;

    private string? Quiz1UserAns;
    private string? Quiz2UserAns;
    private string? Quiz3UserAns;
    private string? Quiz4UserAns;
    private string? Quiz5UserAns;
    private string? Quiz6UserAns;
    private string? Quiz7UserAns;
    private string? Quiz8UserAns;
    private string? Quiz9UserAns;
    private string? Quiz10UserAns;

    private int correctAnsTot = 0;
    private int incorrectAnsTot = 0;
    private string Ans1Check = "NULL";
    private string Ans2Check = "NULL";
    private string Ans3Check = "NULL";
    private string Ans4Check = "NULL";
    private string Ans5Check = "NULL";
    private string Ans6Check = "NULL";
    private string Ans7Check = "NULL";
    private string Ans8Check = "NULL";
    private string Ans9Check = "NULL";
    private string Ans10Check = "NULL";

    private bool ShowUserAnswers = false;

    private bool _processing1 = false;
    private async Task ProcessSomething1()
    {
        _step1Complete = false;
        _processing1 = true;
        await Task.Delay(500);
        _processing1 = false;
        if (Quiz1UserAns != null)
        {
            _step1Complete = true;
        }
    }
    private void _1ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz1UserAns = "1";
                break;
            case 1:
                Quiz1UserAns = "2";
                break;
            case 2:
                Quiz1UserAns = "3";
                break;
            case 3:
                Quiz1UserAns = "4";
                break;
        }
    }

    private bool _processing2 = false;
    private async Task ProcessSomething2()
    {
        _step2Complete = false;
        _processing2 = true;
        await Task.Delay(500);
        _processing2 = false;
        if (Quiz2UserAns != null)
        {
            _step2Complete = true;
        }
    }
    private void _2ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz2UserAns = "1";
                break;
            case 1:
                Quiz2UserAns = "2";
                break;
            case 2:
                Quiz2UserAns = "3";
                break;
            case 3:
                Quiz2UserAns = "4";
                break;
        }
    }

    private bool _processing3 = false;
    private async Task ProcessSomething3()
    {
        _step3Complete = false;
        _processing3 = true;
        await Task.Delay(500);
        _processing3 = false;
        if (Quiz3UserAns != null)
        {
            _step3Complete = true;
        }
    }
    private void _3ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz3UserAns = "1";
                break;
            case 1:
                Quiz3UserAns = "2";
                break;
            case 2:
                Quiz3UserAns = "3";
                break;
            case 3:
                Quiz3UserAns = "4";
                break;
        }
    }

    private bool _processing4 = false;
    private async Task ProcessSomething4()
    {
        _step4Complete = false;
        _processing4 = true;
        await Task.Delay(500);
        _processing4 = false;
        if (Quiz4UserAns != null)
        {
            _step4Complete = true;
        }
    }
    private void _4ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz4UserAns = "1";
                break;
            case 1:
                Quiz4UserAns = "2";
                break;
            case 2:
                Quiz4UserAns = "3";
                break;
            case 3:
                Quiz4UserAns = "4";
                break;
        }
    }

    private bool _processing5 = false;
    private async Task ProcessSomething5()
    {
        _step5Complete = false;
        _processing5 = true;
        await Task.Delay(500);
        _processing5 = false;
        if (Quiz5UserAns != null)
        {
            _step5Complete = true;
        }
    }
    private void _5ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz5UserAns = "1";
                break;
            case 1:
                Quiz5UserAns = "2";
                break;
            case 2:
                Quiz5UserAns = "3";
                break;
            case 3:
                Quiz5UserAns = "4";
                break;
        }
    }

    private bool _processing6 = false;
    private async Task ProcessSomething6()
    {
        _step6Complete = false;
        _processing6 = true;
        await Task.Delay(500);
        _processing6 = false;
        if (Quiz6UserAns != null)
        {
            _step6Complete = true;
        }
    }
    private void _6ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz6UserAns = "1";
                break;
            case 1:
                Quiz6UserAns = "2";
                break;
            case 2:
                Quiz6UserAns = "3";
                break;
            case 3:
                Quiz6UserAns = "4";
                break;
        }
    }

    private bool _processing7 = false;
    private async Task ProcessSomething7()
    {
        _step7Complete = false;
        _processing7 = true;
        await Task.Delay(500);
        _processing7 = false;
        if (Quiz7UserAns != null)
        {
            _step7Complete = true;
        }
    }
    private void _7ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz7UserAns = "1";
                break;
            case 1:
                Quiz7UserAns = "2";
                break;
            case 2:
                Quiz7UserAns = "3";
                break;
            case 3:
                Quiz7UserAns = "4";
                break;
        }
    }

    private bool _processing8 = false;
    private async Task ProcessSomething8()
    {
        _step8Complete = false;
        _processing8 = true;
        await Task.Delay(500);
        _processing8 = false;
        if (Quiz8UserAns != null)
        {
            _step8Complete = true;
        }
    }
    private void _8ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz8UserAns = "1";
                break;
            case 1:
                Quiz8UserAns = "2";
                break;
            case 2:
                Quiz8UserAns = "3";
                break;
            case 3:
                Quiz8UserAns = "4";
                break;
        }
    }

    private bool _processing9 = false;
    private async Task ProcessSomething9()
    {
        _step9Complete = false;
        _processing9 = true;
        await Task.Delay(500);
        _processing9 = false;
        if (Quiz9UserAns != null)
        {
            _step9Complete = true;
        }
    }
    private void _9ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz9UserAns = "1";
                break;
            case 1:
                Quiz9UserAns = "2";
                break;
            case 2:
                Quiz9UserAns = "3";
                break;
            case 3:
                Quiz9UserAns = "4";
                break;
        }
    }

    private bool _processing10 = false;
    private async Task ProcessSomething10()
    {
        _step10Complete = false;
        _processing10 = true;
        await Task.Delay(500);
        _processing10 = false;
        if (Quiz10UserAns != null)
        {
            _step10Complete = true;
        }
    }
    private void _10ButtonQuiz(int id)
    {
        switch (id)
        {
            case 0:
                Quiz10UserAns = "1";
                break;
            case 1:
                Quiz10UserAns = "2";
                break;
            case 2:
                Quiz10UserAns = "3";
                break;
            case 3:
                Quiz10UserAns = "4";
                break;
        }
    }

    // public async Task<(int correctAnsTot, int incorrectAnsTot)> UserAnsCheckFinal(quiz data)
    // {
    //     int correctAnsTot = 0;
    //     int incorrectAnsTot = 0;

    //     if (Quiz1UserAns == data.Quiz1TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz2UserAns == data.Quiz2TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz3UserAns == data.Quiz3TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz4UserAns == data.Quiz4TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz5UserAns == data.Quiz5TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz6UserAns == data.Quiz6TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz7UserAns == data.Quiz7TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz8UserAns == data.Quiz8TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz9UserAns == data.Quiz9TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     if (Quiz10UserAns == data.Quiz10TrueAns) correctAnsTot++; else incorrectAnsTot++;
    //     Console.WriteLine(correctAnsTot);
    //     Console.WriteLine(incorrectAnsTot);
    //     return (correctAnsTot, incorrectAnsTot);
    // }

    private async Task UserAnsCheckFinal()
    {
        correctAnsTot = 0;
        incorrectAnsTot = 0;
        if (Quiz1UserAns == SQLquizdata.Quiz1TrueAns) { correctAnsTot++; Ans1Check = "Correct"; } else { incorrectAnsTot++; Ans1Check = "Incorrect"; }
        if (Quiz2UserAns == SQLquizdata.Quiz2TrueAns) { correctAnsTot++; Ans2Check = "Correct"; } else { incorrectAnsTot++; Ans2Check = "Incorrect"; }
        if (Quiz3UserAns == SQLquizdata.Quiz3TrueAns) { correctAnsTot++; Ans3Check = "Correct"; } else { incorrectAnsTot++; Ans3Check = "Incorrect"; }
        if (Quiz4UserAns == SQLquizdata.Quiz4TrueAns) { correctAnsTot++; Ans4Check = "Correct"; } else { incorrectAnsTot++; Ans4Check = "Incorrect"; }
        if (Quiz5UserAns == SQLquizdata.Quiz5TrueAns) { correctAnsTot++; Ans5Check = "Correct"; } else { incorrectAnsTot++; Ans5Check = "Incorrect"; }
        if (Quiz6UserAns == SQLquizdata.Quiz6TrueAns) { correctAnsTot++; Ans6Check = "Correct"; } else { incorrectAnsTot++; Ans6Check = "Incorrect"; }
        if (Quiz7UserAns == SQLquizdata.Quiz7TrueAns) { correctAnsTot++; Ans7Check = "Correct"; } else { incorrectAnsTot++; Ans7Check = "Incorrect"; }
        if (Quiz8UserAns == SQLquizdata.Quiz8TrueAns) { correctAnsTot++; Ans8Check = "Correct"; } else { incorrectAnsTot++; Ans8Check = "Incorrect"; }
        if (Quiz9UserAns == SQLquizdata.Quiz9TrueAns) { correctAnsTot++; Ans9Check = "Correct"; } else { incorrectAnsTot++; Ans9Check = "Incorrect"; }
        if (Quiz10UserAns == SQLquizdata.Quiz10TrueAns) { correctAnsTot++; Ans10Check = "Correct"; } else { incorrectAnsTot++; Ans10Check = "Incorrect"; }

        Console.WriteLine(correctAnsTot);
        Console.WriteLine(incorrectAnsTot);
    }




    private async Task OnPreviewInteractionQuestionair(StepperInteractionEventArgs arg)
    {
        if (arg.Action == StepAction.Complete)
        {
            // occurrs when clicking next
            await ControlStepCompletion(arg);
        }
        else if (arg.Action == StepAction.Activate)
        {
            // occurrs when clicking a step header with the mouse
            await ControlStepNavigation(arg);
        }
    }

    private async Task ControlStepCompletion(StepperInteractionEventArgs arg)
    {
        switch (arg.StepIndex)
        {
            case 0:
                if ((_step1Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 1 yet.");
                    arg.Cancel = true;
                }
                break;
            case 1:
                if ((_step2Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 2 yet.");
                    arg.Cancel = true;
                }
                break;
            case 2:
                if ((_step3Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 3 yet.");
                    arg.Cancel = true;
                }
                break;
            case 3:
                if ((_step4Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 4 yet.");
                    arg.Cancel = true;
                }
                break;
            case 4:
                if ((_step5Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 5 yet.");
                    arg.Cancel = true;
                }
                break;
            case 5:
                if ((_step6Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 6 yet.");
                    arg.Cancel = true;
                }
                break;
            case 6:
                if ((_step7Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 7 yet.");
                    arg.Cancel = true;
                }
                break;
            case 7:
                if ((_step8Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 8 yet.");
                    arg.Cancel = true;
                }
                break;
            case 8:
                if ((_step9Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 9 yet.");
                    arg.Cancel = true;
                }
                break;
            case 9:
                if ((_step10Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "You have not answered question 10 yet.");
                    arg.Cancel = true;
                }
                break;
        }
    }

    private async Task ControlStepNavigation(StepperInteractionEventArgs arg)
    {
        switch (arg.StepIndex)
        {
            case 1:
                if (_step1Complete != true)
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1' first.");
                    arg.Cancel = true;
                }
                break;
            case 2:
                if ((_step1Complete != true) || (_step2Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2' first.");
                    arg.Cancel = true;
                }
                break;
            case 3:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3' first.");
                    arg.Cancel = true;
                }
                break;
            case 4:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true) || (_step4Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3,4' first.");
                    arg.Cancel = true;
                }
                break;
            case 5:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true) || (_step4Complete != true) || (_step5Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3,4,5' first.");
                    arg.Cancel = true;
                }
                break;
            case 6:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true) || (_step4Complete != true) || (_step6Complete != true) || (_step7Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3,4,5,6' first.");
                    arg.Cancel = true;
                }
                break;
            case 7:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true) || (_step4Complete != true) || (_step6Complete != true) || (_step7Complete != true) || (_step8Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3,4,5,6,7' first.");
                    arg.Cancel = true;
                }
                break;
            case 8:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true) || (_step4Complete != true) || (_step6Complete != true) || (_step7Complete != true) || (_step8Complete != true) || (_step9Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3,4,5,6,7,8' first.");
                    arg.Cancel = true;
                }
                break;
            case 9:
                if ((_step1Complete != true) || (_step2Complete != true) || (_step3Complete != true) || (_step4Complete != true) || (_step6Complete != true) || (_step7Complete != true) || (_step8Complete != true) || (_step9Complete != true) || (_step10Complete != true))
                {
                    await DialogService.ShowMessageBox("Error", "Answer questions: '1,2,3,4,5,6,7,8,9' first.");
                    arg.Cancel = true;
                }
                break;
        }
    }

    private async Task CompleteQuiz()
    {
        UserAnsCheckFinal();
        await Task.Delay(500);
        if (correctAnsTot != 0 || incorrectAnsTot != 0)
        {
            ShowUserAnswers = true;
        }

        
    }
    public double[] result => new double[] {correctAnsTot, incorrectAnsTot};
    public string[] labels = {"Correct", "Incorrect"};

    public class QuizResultTable
    {
        public int QuestionNr { get; set; }
        public string QuestionText {get; set; }
        public string QuestionIfCorrect {get; set; }
    }
    
    // private List<QuizResultTable> _quizResultsTable = new()
    // {
    //     new QuizResultTable { QuestionNr = 1, QuestionText = SQLquizdata.Quiz1Question, QuestionIfCorrect = Ans1Check},
    //     new QuizResultTable { QuestionNr = 2, QuestionText = SQLquizdata.Quiz2Question, QuestionIfCorrect = Ans2Check},
    //     new QuizResultTable { QuestionNr = 3, QuestionText = SQLquizdata.Quiz3Question, QuestionIfCorrect = Ans3Check},
    //     new QuizResultTable { QuestionNr = 4, QuestionText = SQLquizdata.Quiz4Question, QuestionIfCorrect = Ans4Check},
    //     new QuizResultTable { QuestionNr = 5, QuestionText = SQLquizdata.Quiz5Question, QuestionIfCorrect = Ans5Check},
    //     new QuizResultTable { QuestionNr = 6, QuestionText = SQLquizdata.Quiz6Question, QuestionIfCorrect = Ans6Check},
    //     new QuizResultTable { QuestionNr = 7, QuestionText = SQLquizdata.Quiz7Question, QuestionIfCorrect = Ans7Check},
    //     new QuizResultTable { QuestionNr = 8, QuestionText = SQLquizdata.Quiz8Question, QuestionIfCorrect = Ans8Check},
    //     new QuizResultTable { QuestionNr = 9, QuestionText = SQLquizdata.Quiz9Question, QuestionIfCorrect = Ans9Check},
    //     new QuizResultTable { QuestionNr = 10, QuestionText = SQLquizdata.Quiz10Question, QuestionIfCorrect = Ans10Check}
    // };










    public class QuizManager // Replace with your actual class name
{
    private List<QuizResultTable> _quizResultsTable;

    // Declare SQLquizdata and AnsXCheck as fields or pass them into the constructor
    private quiz SQLquizdata;  // Or whatever your actual data source is
    private string Ans1Check, Ans2Check, Ans3Check, Ans4Check, Ans5Check, Ans6Check, Ans7Check, Ans8Check, Ans9Check, Ans10Check;

    // Constructor to initialize the data
    public QuizManager(quiz quizData, string ans1, string ans2, string ans3, string ans4, string ans5, string ans6, string ans7, string ans8, string ans9, string ans10)
    {
        // Assign the parameters to the fields
        SQLquizdata = quizData;
        Ans1Check = ans1;
        Ans2Check = ans2;
        Ans3Check = ans3;
        Ans4Check = ans4;
        Ans5Check = ans5;
        Ans6Check = ans6;
        Ans7Check = ans7;
        Ans8Check = ans8;
        Ans9Check = ans9;
        Ans10Check = ans10;

        // Initialize the quizResultsTable in the constructor
        _quizResultsTable = new List<QuizResultTable>
        {
            new QuizResultTable { 
                QuestionNr = 1, 
                QuestionText = SQLquizdata?.Quiz1Question ?? "No Question", 
                QuestionIfCorrect = Ans1Check == "NotAnswered" ? "Answer not provided" : (Ans1Check == SQLquizdata?.Quiz1TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 2, 
                QuestionText = SQLquizdata?.Quiz2Question ?? "No Question", 
                QuestionIfCorrect = Ans2Check == "NotAnswered" ? "Answer not provided" : (Ans2Check == SQLquizdata?.Quiz2TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 3, 
                QuestionText = SQLquizdata?.Quiz3Question ?? "No Question", 
                QuestionIfCorrect = Ans3Check == "NotAnswered" ? "Answer not provided" : (Ans3Check == SQLquizdata?.Quiz3TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 4, 
                QuestionText = SQLquizdata?.Quiz4Question ?? "No Question", 
                QuestionIfCorrect = Ans4Check == "NotAnswered" ? "Answer not provided" : (Ans4Check == SQLquizdata?.Quiz4TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 5, 
                QuestionText = SQLquizdata?.Quiz5Question ?? "No Question", 
                QuestionIfCorrect = Ans5Check == "NotAnswered" ? "Answer not provided" : (Ans5Check == SQLquizdata?.Quiz5TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 6, 
                QuestionText = SQLquizdata?.Quiz6Question ?? "No Question", 
                QuestionIfCorrect = Ans6Check == "NotAnswered" ? "Answer not provided" : (Ans6Check == SQLquizdata?.Quiz6TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 7, 
                QuestionText = SQLquizdata?.Quiz7Question ?? "No Question", 
                QuestionIfCorrect = Ans7Check == "NotAnswered" ? "Answer not provided" : (Ans7Check == SQLquizdata?.Quiz7TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 8, 
                QuestionText = SQLquizdata?.Quiz8Question ?? "No Question", 
                QuestionIfCorrect = Ans8Check == "NotAnswered" ? "Answer not provided" : (Ans8Check == SQLquizdata?.Quiz8TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 9, 
                QuestionText = SQLquizdata?.Quiz9Question ?? "No Question", 
                QuestionIfCorrect = Ans9Check == "NotAnswered" ? "Answer not provided" : (Ans9Check == SQLquizdata?.Quiz9TrueAns ? "Correct" : "Incorrect")
            },
            new QuizResultTable { 
                QuestionNr = 10, 
                QuestionText = SQLquizdata?.Quiz10Question ?? "No Question", 
                QuestionIfCorrect = Ans10Check == "NotAnswered" ? "Answer not provided" : (Ans10Check == SQLquizdata?.Quiz10TrueAns ? "Correct" : "Incorrect")
            }
        };
    }
}







}